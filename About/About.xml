<?xml version="1.0" encoding="utf-8"?>
<ModMetaData>
	<packageId>nitoritech.rimtalk.tts</packageId>
	<name>RimTalk TTS Addon</name>
	<author>Nitori_Tachyon</author>
	<description>Text-to-Speech extension for RimTalk that brings your colonists' voices to life!

[url=https://github.com/whatismyname0/RimTalkTTSModule]Github[/url]
[url=https://tieba.baidu.com/p/10278651916]Install tutorial (Baidu Tieba in Chinese)[/url]
[url=https://www.bilibili.com/video/BV1PB2fBsEtQ]Preview video (Bilibili)[/url]

This mod captures dialogue generated by RimTalk and converts it to speech. Features include:

[h2]Feature[/h2]

[list]
[*]Real-time speech synthesis for all RimTalk dialogues
[*]Per-pawn voice model configuration
[*]Customize voice models
[*]Support Fish Audio, CosyVoice2(SiliconFlow) &amp; IndexTTS2(SiliconFlow)
[*]Translation support for multilingual speech
[*]Automatic dialogue blocking until speech is ready
[*]Turn on and off anytime
[*]Synchronized cancellation when RimTalk ignores dialogue
[*]Configurable voice parameters (temperature, top_p) (Available only for fish audio)
[*]Volume control
[*]Button to ignore all existing Rimtalk dialogues
[*]Button to generate a round of new Rimtalk dialogue
[/list]

[h2]Requirements[/h2]

[list]
[*]RimTalk must be installed and enabled
[*]It is recommended to disable "Allow Simultaneous Conversations" setting in Rimtalk
[/list]

[h3]Fish Audio Requirements[/h3]

[list]
[*]Python 3.9+ with fish-audio-sdk package installed
[*][url=https://fish.audio/]Fish Audio[/url] API key
[*]Voice reference ID (can be found on fish audio website by clicking "share" button of the voice model you want to add, then delete "https://fish.audio/m/") for speech generation
[/list]

[h3]CosyVoice2 &amp; IndexTTS2 Requirements[/h3]

[*][url=https://www.siliconflow.cn/]SiliconFlow[/url] API key
[*](Optional)Voice references for CosyVoice2 and IndexTTS2(Add them through in-game mod option menu)
[*](Optional)Verify your real world indentity to use custom voices

[h2]Setup[/h2]

[olist]
[*]Enable both RimTalk and RimTalk TTS mods
[*]Get your Fish Audio API key
[*]Install FIsh Audio SDK
[*]Configure TTS model and input text process model settings in mod options
[*]Assign voice models to your colonists
[/olist]

[h2]ATTENTION[/h2]: When using Alt+F4 to close the game, RimTalk TTS may not shutdown the server.
This mod operates non-invasively through Harmony patches and does not modify RimTalk's core code.

Recommended prompt sentences for TTS input pre-process (Fish Audio):
Always add (long-break) after the text.
Always repeat audio effects: ...(laughing)(laughing)... for example.
Delete ALL non-speech parts in original input.

Recommended prompt sentences for TTS input pre-process (CosyVoice2):
Determine prompt, including tone, emotion, speed, speaking style and feeling, according to the text.
Prompt must be at the beginning of your output, seperated from the text by &lt;|endofprompt|&gt;
Delete all descriptive content in the original text, leaving only the speech.
You can add these marks in proper position in output. MUST conform to the mood and content of the original text: [breath],&lt;strong&gt;&lt;/strong&gt;(enhance the tone of the content enclosed within it),[noise],[laughter],[cough],[clucking],[accent],[quick_breath],&lt;laughter&gt;&lt;/laughter&gt;(put a smile on the content enclosed within it),[hissing],[sigh],[vocalized-noise],[lipsmack]
	</description>
	<supportedVersions>
		<li>1.6</li>
	</supportedVersions>
	<modDependencies>
		<li>
			<packageId>brrainz.harmony</packageId>
			<displayName>Harmony</displayName>
			<steamWorkshopUrl>steam://url/CommunityFilePage/2009463077</steamWorkshopUrl>
			<downloadUrl>https://github.com/pardeike/HarmonyRimWorld/releases/latest</downloadUrl>
		</li>
		<li>
			<packageId>cj.rimtalk</packageId>
			<displayName>RimTalk</displayName>
			<steamWorkshopUrl>steam://url/CommunityFilePage/3551203752</steamWorkshopUrl>
			<downloadUrl>https://github.com/jlibrary/RimTalk/</downloadUrl>
		</li>
	</modDependencies>
	<loadAfter>
		<li>brrainz.harmony</li>
		<li>cj.rimtalk</li>
	</loadAfter>
</ModMetaData>
